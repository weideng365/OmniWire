import{a as w,c as g,b as s,x as P,d as t,w as a,T as U,r as b,e as u,g as q,h as i,M as A,_ as k,a2 as N,y as m,a3 as R,t as W,i as B,m as G,s as D,l as E,q as I,a4 as M,C as O,f as y,R as c}from"./index-BSRU_Tbs.js";import{s as Z}from"./index-Cz2QBiLu.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"settings-page"},H={class:"settings-container"},K={class:"settings-nav"},L={class:"nav-icon"},j={class:"nav-icon"},J={class:"settings-content"},Q={class:"content-panel",key:"account"},X={class:"password-strength"},Y={class:"strength-text"},ee={class:"form-actions"},se={class:"content-panel",key:"about"},te={class:"about-container"},ae={class:"app-logo"},le={class:"feature-list"},oe={class:"feature-item"},ne={class:"feature-item"},ie={class:"feature-item"},re={class:"app-links"},de={href:"https://github.com",target:"_blank",class:"link-item"},ue={href:"https://wireguard.com",target:"_blank",class:"link-item"},fe={__name:"Settings",setup(ve){const V=q(),d=b("account"),p=b(!1),l=b({username:"admin",oldPassword:"",newPassword:"",confirmPassword:""}),_=y(()=>{const o=l.value.newPassword;if(!o)return 0;let e=0;return o.length>6&&(e+=20),o.length>10&&(e+=20),/[A-Z]/.test(o)&&(e+=20),/[0-9]/.test(o)&&(e+=20),/[^A-Za-z0-9]/.test(o)&&(e+=20),e}),h=y(()=>{const o=_.value;return o<40?"#ef4444":o<80?"#f59e0b":"#10b981"}),x=y(()=>{const o=_.value;return o===0?"":o<40?"弱":o<80?"中":"强"}),C=async()=>{if(!l.value.oldPassword){c.warning("请输入旧密码");return}if(!l.value.newPassword){c.warning("请输入新密码");return}if(l.value.newPassword!==l.value.confirmPassword){c.warning("两次输入的密码不一致");return}p.value=!0;try{await Z.changePassword({oldPassword:l.value.oldPassword,newPassword:l.value.newPassword}),c.success("密码修改成功，请重新登录"),setTimeout(()=>{localStorage.removeItem("token"),V.push("/login")},1500)}catch{}finally{p.value=!1}};return(o,e)=>{const n=u("el-icon"),S=u("el-tag"),f=u("el-input"),v=u("el-form-item"),T=u("el-button"),z=u("el-form");return w(),g("div",F,[e[19]||(e[19]=s("div",{class:"page-title"},"系统设置",-1)),s("div",H,[s("div",K,[s("div",{class:P(["nav-item",{active:d.value==="account"}]),onClick:e[0]||(e[0]=r=>d.value="account")},[s("div",L,[t(n,null,{default:a(()=>[t(i(A))]),_:1})]),e[6]||(e[6]=s("div",{class:"nav-text"},"账号安全",-1)),t(n,{class:"nav-arrow"},{default:a(()=>[t(i(k))]),_:1})],2),s("div",{class:P(["nav-item",{active:d.value==="about"}]),onClick:e[1]||(e[1]=r=>d.value="about")},[s("div",j,[t(n,null,{default:a(()=>[t(i(N))]),_:1})]),e[7]||(e[7]=s("div",{class:"nav-text"},"关于系统",-1)),t(n,{class:"nav-arrow"},{default:a(()=>[t(i(k))]),_:1})],2)]),s("div",J,[t(U,{name:"fade-slide",mode:"out-in"},{default:a(()=>[d.value==="account"?(w(),g("div",Q,[e[10]||(e[10]=s("div",{class:"panel-header"},[s("h3",null,"修改密码"),s("p",null,"为了您的账户安全，建议定期更换密码")],-1)),t(z,{ref:"passwordFormRef",model:l.value,"label-position":"top",class:"settings-form",size:"large"},{default:a(()=>[t(v,{label:"当前登录用户"},{default:a(()=>[t(f,{modelValue:l.value.username,"onUpdate:modelValue":e[2]||(e[2]=r=>l.value.username=r),disabled:"","prefix-icon":"User"},{suffix:a(()=>[t(S,{size:"small",type:"success",effect:"plain"},{default:a(()=>[...e[8]||(e[8]=[m("管理员",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(v,{label:"旧密码",required:""},{default:a(()=>[t(f,{modelValue:l.value.oldPassword,"onUpdate:modelValue":e[3]||(e[3]=r=>l.value.oldPassword=r),type:"password",placeholder:"请输入当前使用的密码","show-password":"","prefix-icon":"Lock"},null,8,["modelValue"])]),_:1}),t(v,{label:"新密码",required:""},{default:a(()=>[t(f,{modelValue:l.value.newPassword,"onUpdate:modelValue":e[4]||(e[4]=r=>l.value.newPassword=r),type:"password",placeholder:"设置一个新的强密码","show-password":"","prefix-icon":"Key"},null,8,["modelValue"]),s("div",X,[s("div",{class:"strength-bar",style:R({width:_.value+"%",background:h.value})},null,4)]),s("span",Y,W(x.value),1)]),_:1}),t(v,{label:"确认新密码",required:""},{default:a(()=>[t(f,{modelValue:l.value.confirmPassword,"onUpdate:modelValue":e[5]||(e[5]=r=>l.value.confirmPassword=r),type:"password",placeholder:"再次输入新密码","show-password":"","prefix-icon":"CircleCheck"},null,8,["modelValue"])]),_:1}),s("div",ee,[t(T,{type:"primary",onClick:C,loading:p.value,class:"save-btn"},{default:a(()=>[...e[9]||(e[9]=[m(" 确认修改 ",-1)])]),_:1},8,["loading"])])]),_:1},8,["model"])])):d.value==="about"?(w(),g("div",se,[s("div",te,[s("div",ae,[t(n,null,{default:a(()=>[t(i(B))]),_:1})]),e[16]||(e[16]=s("h1",{class:"app-name"},"OmniWire",-1)),e[17]||(e[17]=s("div",{class:"app-version"},"Version 1.0.0",-1)),s("div",le,[s("div",oe,[t(n,null,{default:a(()=>[t(i(G))]),_:1}),e[11]||(e[11]=s("span",null,"WireGuard 核心管理",-1))]),s("div",ne,[t(n,null,{default:a(()=>[t(i(D))]),_:1}),e[12]||(e[12]=s("span",null,"高效端口转发",-1))]),s("div",ie,[t(n,null,{default:a(()=>[t(i(E))]),_:1}),e[13]||(e[13]=s("span",null,"企业级安全防护",-1))])]),s("div",re,[s("a",de,[t(n,null,{default:a(()=>[t(i(I))]),_:1}),e[14]||(e[14]=m(" GitHub Repository ",-1))]),s("a",ue,[t(n,null,{default:a(()=>[t(i(M))]),_:1}),e[15]||(e[15]=m(" WireGuard Docs ",-1))])]),e[18]||(e[18]=s("div",{class:"copyright"}," © 2026 OmniWire Team. All rights reserved. ",-1))])])):O("",!0)]),_:1})])])])}}},_e=$(fe,[["__scopeId","data-v-b5edd922"]]);export{_e as default};
